<script>
    let originalNewsData = []; 

    async function loadCveNews() {
        const res = await fetch("http://localhost:5566/api/cve-news");
        const data = await res.json();

        // ðŸ”¥ í˜¼í•© ì ìˆ˜ ê³„ì‚° ë¡œì§
        const scoredNews = data.news.map(item => {
            const publishedDate = new Date(item.published);
            const today = new Date();
            
            const diffDays =
                (today - publishedDate) / (1000 * 60 * 60 * 24); // ë‚ ì§œ ì°¨ì´

            const dateScore = 1 / (diffDays + 1);   // ìµœê·¼ì¼ìˆ˜ë¡ ë†’ì€ ì ìˆ˜
            const cveScore = item.cves.length;      // CVE ê°œìˆ˜ ì ìˆ˜

            const mixScore = dateScore * 0.7 + cveScore * 0.3;

            return { ...item, score: mixScore };
        });

        // ðŸ”¥ í˜¼í•© ì ìˆ˜ TOP 5 ì„ íƒ
        originalNewsData = scoredNews
            .sort((a, b) => b.score - a.score)
            .slice(0, 5);

        renderNews(originalNewsData);
    }
</script>
